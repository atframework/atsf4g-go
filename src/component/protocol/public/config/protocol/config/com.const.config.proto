syntax = "proto3";

option optimize_for = SPEED;
// option optimize_for = LITE_RUNTIME;
// option optimize_for = CODE_SIZE;
// --cpp_out=lite:,--cpp_out=
option cc_enable_arenas = true;

option go_package = "github.com/atframework/atsf4g-go/component-protocol-public/config/protocol/config";

import "google/protobuf/duration.proto";
import "google/protobuf/timestamp.proto";

import "protocol/extension/xrescode_extensions_v3.proto";
import "protocol/common/com.struct.base.common.proto";

package proy.config;

// 常量类型
enum GameConstConfig {
  // option allow_alias               = true;
  EN_GCC_UNKNOWN = 0;
  EN_GCC_PERCENT_BASE = 1000;             // 所有比例都是千分率
  EN_GCC_RESOURCE_MAX_LIMIT = 99999999;   // 资源限制
  EN_GCC_LEVEL_LIMIT = 999;               // 最大等级限制
  EN_GCC_ACTIVATION_CODE_PERMANENT = 64;  // 永久生效的激活码最大批次
  EN_GCC_START_PLAYER_ID = 10000;         // start id for alloc player id
}

message TestConstSubStruct {
  int32 test_int32 = 1;
  string test_string = 2;
}

message TestConstStruct {
  int32 test_int32 = 1;
  string test_string = 2;
  float test_float = 3;
  google.protobuf.Duration test_duration = 4;
  google.protobuf.Timestamp test_timestamp = 5;
  TestConstSubStruct test_sub_struct = 10;
  repeated int32 test_repeated_int32 = 11;
  repeated TestConstSubStruct test_repeated_sub_struct = 12;
}

message ExcelConstConfig {
  option (xrescode.loader) = {
    file_path: "const_settings.bytes"
    indexes: { fields: "fake_key" index_type: EN_INDEX_KV }

    tags: "client"
    tags: "server"
  };

  // 虚拟的字段，用于生成读表代码。没有实际作用
  int32 fake_key = 9999;

  google.protobuf.Duration mail_default_expire = 1;
  int32 mail_max_count_per_major_type = 2;
  int32 global_mail_max_count_per_major_type = 3;
  string i18n_system_admin = 4;
  google.protobuf.Duration delete_quest_cache_time = 8;
  google.protobuf.Timestamp timezone_base_timestamp = 9;
  google.protobuf.Duration quest_index_refresh_interval = 10;
  google.protobuf.Duration quest_index_max_cache_time = 11;  // 需要大于等于 refresh interval
  int32 user_options_max_size = 13;  // DUserOptions 的最大允许size

  google.protobuf.Duration unlock_index_refresh_interval = 23;
  google.protobuf.Duration unlock_index_max_cache_time = 24;  // 需要大于等于 refresh interval
}

message ExcelOriginConstConfig {
  option (xrescode.loader) = {
    file_path: "const.bytes"
    indexes: { fields: "key" index_type: EN_INDEX_KV }

    tags: "client"
    tags: "server"
  };

  string key = 1;
  string value = 2;
}
