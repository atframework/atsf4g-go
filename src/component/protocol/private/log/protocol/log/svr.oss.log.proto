syntax = "proto3";

option optimize_for = SPEED;
// option optimize_for = LITE_RUNTIME;
// option optimize_for = CODE_SIZE;
// --cpp_out=lite:,--cpp_out=
option cc_enable_arenas = true;

option go_package = "github.com/atframework/atsf4g-go/component-protocol-private/log/protocol/log";

import "protocol/common/com.struct.item.common.proto";

package proy;

// 上报后不允许更改字段名字

message OperationSupportSystemLogBasicInfo {
  string app_id = 1;
  uint64 user_id = 2;
  uint32 zone_id = 3;
}

message OperationSupportSystemLog {
  string log_type = 1;
  OperationSupportSystemLogBasicInfo basic = 2;
  oneof detail {
    OSSItemFlow item_flow = 10;
    OSSLoginClientBeginFlow login_client_begin_flow = 11;
    OSSLoginServerBeginFlow login_server_begin_flow = 12;
    OSSLoginFlow login_flow = 13;
    OSSLogoutFlow logout_flow = 14;
  }
}

message OSSItemFlow {
  int32 item_id = 1;
  enum EnOSSItemFlowOperationType {
    EN_OSS_ITEM_FLOW_OPERATION_TYPE_INVALID = 0;
    EN_OSS_ITEM_FLOW_OPERATION_TYPE_ADD = 1;
    EN_OSS_ITEM_FLOW_OPERATION_TYPE_SUB = 2;
    EN_OSS_ITEM_FLOW_OPERATION_TYPE_USE = 3;
  }
  EnOSSItemFlowOperationType operation_type = 2;
  int64 operation_count = 3;
  int64 after_count = 4;
  int32 result = 5;

  EnItemFlowReasonMajorType major_reason = 11;
  EnItemFlowReasonMinorType minor_reason = 12;
  int64 parameter = 13;
}

message OSSLoginClientBeginFlow {
  // 客户端尝试开始登录
}

message OSSLoginServerBeginFlow {
  // 服务器尝试开始登录
}

message OSSLoginFlow {
  // 登录成功
}

message OSSLogoutFlow {
  // 登出
}