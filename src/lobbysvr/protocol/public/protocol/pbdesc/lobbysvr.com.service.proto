syntax = "proto3";
// 前后台通信协议定义

option optimize_for = SPEED;
// option optimize_for = LITE_RUNTIME;
// option optimize_for = CODE_SIZE;
// --cpp_out=lite:,--cpp_out=
option cc_enable_arenas = true;
option cc_generic_services = true;

option go_package = "github.com/atframework/atsf4g-go/service-lobbysvr/protocol/public/protocol/pbdesc";

import "google/protobuf/empty.proto";

import "protocol/extension/atframework.proto";

import "protocol/pbdesc/lobbysvr.com.protocol.user.proto";
import "protocol/pbdesc/lobbysvr.com.protocol.quest.proto";
import "protocol/pbdesc/lobbysvr.com.protocol.activate.proto";
import "protocol/pbdesc/lobbysvr.com.protocol.mall.proto";

package proy;

service LobbyClientService {
  /////////////////////////// user /////////////////////////////
  rpc login_auth(CSLoginAuthReq) returns (SCLoginAuthRsp) {
    option (atframework.rpc_options) = {
      module_name: "user"
      api_name: "Authorization"
    };
  };

  rpc login(CSLoginReq) returns (SCLoginRsp) {
    option (atframework.rpc_options) = {
      module_name: "user"
      api_name: "Login"
    };
  };

  rpc ping(CSPingReq) returns (SCPongRsp) {
    option (atframework.rpc_options) = {
      module_name: "user"
      api_name: "Ping/pong"
    };
  };

  rpc access_update(CSAccessUpdateReq) returns (SCAccessUpdateRsp) {
    option (atframework.rpc_options) = {
      module_name: "user"
      api_name: "Update access token"
    };
  };

  rpc user_get_info(CSUserGetInfoReq) returns (SCUserGetInfoRsp) {
    option (atframework.rpc_options) = {
      module_name: "user"
      api_name: "Get user data"
    };
  };

  rpc user_send_gm_command(CSUserGMCommandReq) returns (SCUserGMCommandRsp) {
    option (atframework.rpc_options) = {
      module_name: "user"
      api_name: "GM command"
    };
  };

  rpc user_update_client_option(CSUserUpdateClientOptionReq) returns (SCUserUpdateClientOptionRsp) {
    option (atframework.rpc_options) = {
      module_name: "user"
      api_name: "Update user options"
    };
  };

  // Use stream request to disable waiting for response
  rpc user_dirty_chg_sync(google.protobuf.Empty) returns (stream SCUserDirtyChgSync) {
    option (atframework.rpc_options) = {
      module_name: "user"
      api_name: "Push dirty data"
    };
  };
  /////////////////////////// user /////////////////////////////
  
  /////////////////////////// quest /////////////////////////////
  rpc quest_receive_reward(CSQuestReceiveRewardReq) returns (SCQuestReceiveRewardRsp) {
    option (atframework.rpc_options) = {
      module_name: "quest"
      api_name: "领取任务奖励"
    };
  };

  rpc quest_update_status(CSQuestUpdateStatusReq) returns (SCQuestUpdateStatusRsp) {
    option (atframework.rpc_options) = {
      module_name: "quest"
      api_name: "客户群请求更新任务状态"
    };
  };
  /////////////////////////// quest /////////////////////////////

  /////////////////////////// activate /////////////////////////////
  rpc user_activate(CSUserActivateReq) returns (SCUserActivateRsp) {
    option (atframework.rpc_options) = {
      module_name: "activate"
      api_name: "用户激活"
    };
  };
  /////////////////////////// activate /////////////////////////////
  /////////////////////////// mall /////////////////////////////
  rpc mall_purchase(CSMallPurchaseReq) returns (SCMallPurchaseRsp) {
    option (atframework.rpc_options) = {
      module_name: "mall"
      api_name: "购买商品"
    };
  };
  /////////////////////////// mall /////////////////////////////
}
