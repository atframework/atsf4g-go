# etcd.yaml
# vim: set sw=2 sts=2 et:
# encoding: utf-8

enabled: true
log:
  enable: true
  startup_level: debug
  level: info
path: /atapp/services/prox
client_urls:
  - https://etcd.prox.woa.com:2379
ssl:
  enable_alpn: true
  verify_peer: false
  ssl_min_version: TLSv1.2
  ssl_client_cert_file: etcd-c79mrwcy-Cert.crt
  ssl_client_key_file: etcd-c79mrwcy-Key.key
  ssl_client_key_passwd: ""
  ssl_ca_cert_file: etcd-c79mrwcy-CAcert.crt
  ssl_cipher_list: ""
  ssl_cipher_list_tls13: ""
# etcdctl user add root # password -> D8_vi-cTPvzWmCXE
# etcdctl --user root --password D8_vi-cTPvzWmCXE user grant-role root root
# etcdctl auth enable
# etcdctl --user root --password D8_vi-cTPvzWmCXE role list
# etcdctl --user root --password D8_vi-cTPvzWmCXE role add prox-admin
# etcdctl --user root --password D8_vi-cTPvzWmCXE role grant-permission --prefix=true prox-admin readwrite /atapp/services/prox/
# etcdctl --user root --password D8_vi-cTPvzWmCXE user add prox # password -> prox@2023
# etcdctl --user root --password D8_vi-cTPvzWmCXE user grant-role prox prox-admin
# etcdctl --user root --password D8_vi-cTPvzWmCXE user get prox
# etcdctl --user prox --password prox@2023 get --prefix=true /atapp/services/prox/by_battle_version/
# 线上环境etcd认证请用 auth-token: jwt,pub-key=server.rsa.crt,priv-key=server.rsa.key,sign-method=RS256,ttl=20m
# 线上环境etcd认证请用 auth-token: jwt,pub-key=server.ecc.crt,priv-key=server.ecc.key,sign-method=ES256,ttl=20m
# prox:prox@2023  # 腾讯云的ETCD集群不支持使用gRPC-gateway开CNAME鉴权
authorization: ""
cluster:
  auto_update: false # set false when etcd service is behind a safe cluster(Kubernetes etc.)
  update_interval: 5m
  retry_interval: 1m
keepalive:
  timeout: 31s
  ttl: 10s
  retry_interval: 3s
request:
  timeout: 15s
  initialization_timeout: 6s
  connect_timeout: 5s
  dns_cache_timeout: 300s
  dns_servers: ""
init:
  timeout: 20s
watcher:
  retry_interval: 15s
  request_timeout: 1h
  get_request_timeout: 3m
  startup_random_delay_min: 0s
  startup_random_delay_max: 0s
  by_id: false
  by_name: true
report_alive:
  by_id: false
  by_type: true
  by_name: true
  by_tag: []